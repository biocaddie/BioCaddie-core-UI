
<html>
    <head>
        <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
        <style>
            /* only for the demo */
            .ui-autocomplete {
                box-shadow: rgb(136, 136, 136) 1px 2px 2px;
                border-radius: 2px;
            }
            .ui-widget {
               font-family: Arial,sans-serif;
               font-size: 1em;
            }
            #search {
                width: 400px;
                font-size: 1.1em;
            }
            #loading {
                padding-left: 5px;
            }
        </style>
    </head>
    <body>
        <form>
            <label>Search: <input id="search"><img src="images/loading.gif" id="loading" style="display: none;"></label>
        </form>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
        <script>
        $( "#search" ).autocomplete({
          source: function(req, res) {
            $('#loading').show();
            $.ajax({
                url: 'whatsthis.php',
                data: {q: req.term},
                dataType: "json",
                success: function(data){
                    res( $.map(data, function(item){
                            return {
                                label: item.completion,
                                value: item.completion
                            }
                    }) );
                },
                complete: function(){
                    $('#loading').hide();
                }
            });
          }
        });
        </script>
    </body>
</html>

